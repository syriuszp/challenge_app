class Like < ActiveRecord::Base
  belongs_to :answer
  validates_presence_of :user_id, :answer_id
  validates_uniqueness_of :answer_id, scope: :user_id
  validate :not_self_liking
  
  def not_self_liking
    puts "Przed pobranie answer #{self.answer_id}"
    answer = Answer.find_by_id(self.answer_id)
    puts "Po pobranie answer #{answer.user_id}"
    errors.add(:user_id, 'User can not like answer he is author of') if self.user_id == answer.user_id
  end

end
 
